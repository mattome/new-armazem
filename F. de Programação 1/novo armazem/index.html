<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Armaz√©m do S√≠tio - Sabores da Ro√ßa para Voc√™!</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <header>
        <div class="container">
            <h1>Armaz√©m do S√≠tio</h1>
            <p>Sabores frescos da ro√ßa, feitos com carinho da nossa fam√≠lia para a sua!</p>
            <div class="cart-icon" id="open-cart-btn">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-item-count">0</span>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul>
                <li><a href="#destaques">Destaques</a></li>
                <li><a href="#produtos">Nosso Cat√°logo</a></li>
                <li><a href="#como-pedir">Como Pedir</a></li>
                <li><a href="#contato">Contato</a></li>
            </ul>
        </div>
    </nav>

    <main class="container">
        <section id="destaques" class="section">
            <h2>‚ú® Destaques da Semana ‚ú®</h2>
            <div class="product-grid">
                <div class="product-card">
                    <img src="https://via.placeholder.com/250x180/FFD700/FFFFFF?text=P√£o+Caseiro" alt="P√£o Caseiro">
                    <h3>P√£o Caseiro Fresquinho</h3>
                    <p>Feito com fermenta√ß√£o natural. Crocante por fora, macio por dentro.</p>
                    <span class="price" data-value="15.00">R$ 15,00</span>
                    <button class="add-to-cart-btn" data-name="P√£o Caseiro Fresquinho" data-price="15.00">Adicionar ao
                        Carrinho</button>
                </div>
                <div class="product-card">
                    <img src="https://via.placeholder.com/250x180/9ACD32/FFFFFF?text=Morangos+Org√¢nicos"
                        alt="Morangos Org√¢nicos">
                    <h3>Morangos Org√¢nicos</h3>
                    <p>Colhidos na hora, sem agrot√≥xicos. Doce e suculento!</p>
                    <span class="price" data-value="10.00">R$ 10,00 / bandeja</span>
                    <button class="add-to-cart-btn" data-name="Morangos Org√¢nicos" data-price="10.00">Adicionar ao
                        Carrinho</button>
                </div>
            </div>
        </section>

        <hr>

        <section id="produtos" class="section">
            <h2>üçé Nosso Cat√°logo Completo ü•ï</h2>
            <div class="category-filter">
                <button class="filter-btn active" data-category="all">Todos</button>
                <button class="filter-btn" data-category="hortifruti">Hortifr√∫ti</button>
                <button class="filter-btn" data-category="artesanais">Artesanais</button>
                <button class="filter-btn" data-category="laticinios">Latic√≠nios</button>
            </div>

            <div class="product-grid">
                <div class="product-card" data-category="hortifruti">
                    <img src="https://via.placeholder.com/250x180/8B0000/FFFFFF?text=Tomate+Org√¢nico"
                        alt="Tomate Org√¢nico">
                    <h3>Tomate Org√¢nico</h3>
                    <p>Fresquinho da nossa horta, sabor incompar√°vel.</p>
                    <span class="price" data-value="8.00">R$ 8,00 / kg</span>
                    <button class="add-to-cart-btn" data-name="Tomate Org√¢nico" data-price="8.00">Adicionar ao
                        Carrinho</button>
                </div>
                <div class="product-card" data-category="artesanais">
                    <img src="https://via.placeholder.com/250x180/A0522D/FFFFFF?text=Doce+de+Leite"
                        alt="Doce de Leite Caseiro">
                    <h3>Doce de Leite Caseiro</h3>
                    <p>Receita da vov√≥ Lourdes, cremoso e delicioso.</p>
                    <span class="price" data-value="25.00">R$ 25,00 / pote</span>
                    <button class="add-to-cart-btn" data-name="Doce de Leite Caseiro" data-price="25.00">Adicionar ao
                        Carrinho</button>
                </div>
            </div>
        </section>

        <hr>

        <section id="como-pedir" class="section">
            <h2>üõí Como Fazer Seu Pedido?</h2>
            <div class="steps">
                <div class="step-card">
                    <i class="fas fa-search-plus"></i>
                    <h3>1. Escolha seus produtos</h3>
                    <p>Navegue pelo nosso cat√°logo e clique em "Adicionar ao Carrinho" nos itens que voc√™ quer.</p>
                </div>
                <div class="step-card">
                    <i class="fas fa-shopping-cart"></i>
                    <h3>2. Revise seu Carrinho</h3>
                    <p>Clique no √≠cone do carrinho no canto superior para ver sua lista e ajustar as quantidades.</p>
                </div>
                <div class="step-card">
                    <i class="fab fa-whatsapp"></i>
                    <h3>3. Envie o Pedido via WhatsApp</h3>
                    <p>Com tudo certo no carrinho, clique em "Enviar Pedido via WhatsApp" para a Sra. Lourdes.</p>
                </div>
                <div class="step-card">
                    <i class="fas fa-handshake"></i>
                    <h3>4. Combine Pagamento e Entrega</h3>
                    <p>A Sra. Lourdes entrar√° em contato para confirmar, combinar o pagamento (Pix, dinheiro, cart√£o) e
                        a entrega.</p>
                </div>
            </div>
        </section>

        <hr>

        <section id="contato" class="section">
            <h2>‚úâÔ∏è Fale Conosco</h2>
            <p>Estamos √† disposi√ß√£o para tirar suas d√∫vidas e receber seu pedido!</p>
            <ul class="contact-list">
                <li><a href="tel:+5544999999999"><i class="fas fa-phone"></i> (44) 9XXXX-XXXX</a></li>
                <li><a href="https://wa.me/5544999999999" target="_blank"><i class="fab fa-whatsapp"></i> (44)
                        9XXXX-XXXX</a></li>
                <li><a href="https://www.instagram.com/armazemdositioloanda" target="_blank"><i
                            class="fab fa-instagram"></i> @armazemdositioloanda</a></li>
                <li><a href="https://www.facebook.com/armazemdositioloanda" target="_blank"><i
                            class="fab fa-facebook"></i> Armaz√©m do S√≠tio Loanda</a></li>
                <li><i class="fas fa-map-marker-alt"></i> Rua Principal, 123 - Centro, Loanda/PR</li>
                <li><i class="fas fa-clock"></i> Segunda a S√°bado, das 8h √†s 18h</li>
            </ul>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Armaz√©m do S√≠tio. Todos os direitos reservados.</p>
            <p>Desenvolvido com carinho para Loanda/PR.</p>
        </div>
    </footer>

    <a href="#" class="whatsapp-float" target="_blank" id="whatsapp-float-btn">
        <i class="fab fa-whatsapp"></i>
        <span>Enviar Pedido!</span>
    </a>

    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>üõí Seu Carrinho</h2>
            <div id="cart-items">
                <p class="empty-cart-message">Seu carrinho est√° vazio.</p>
            </div>
            <div class="cart-summary">
                <p>Total: <span id="cart-total">R$ 0,00</span></p>
                <button id="checkout-whatsapp-btn" class="checkout-btn"><i class="fab fa-whatsapp"></i> Enviar Pedido
                    via WhatsApp</button>
                <button id="clear-cart-btn" class="clear-btn">Limpar Carrinho</button>
            </div>
        </div>
    </div>

    <script>
        // Array para armazenar os itens do carrinho
        let cart = [];

        // Elementos do DOM
        const cartItemCount = document.getElementById('cart-item-count');
        const cartModal = document.getElementById('cart-modal');
        const openCartBtn = document.getElementById('open-cart-btn');
        const closeCartBtn = document.querySelector('.close-button');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotalSpan = document.getElementById('cart-total');
        const checkoutWhatsappBtn = document.getElementById('checkout-whatsapp-btn');
        const clearCartBtn = document.getElementById('clear-cart-btn');

        const whatsappFloatBtn = document.getElementById('whatsapp-float-btn'); // Bot√£o flutuante

        // Adiciona um produto ao carrinho
        document.querySelectorAll('.add-to-cart-btn').forEach(button => {
            button.addEventListener('click', () => {
                const productName = button.dataset.name;
                const productPrice = parseFloat(button.dataset.price);

                const existingItem = cart.find(item => item.name === productName);

                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ name: productName, price: productPrice, quantity: 1 });
                }
                updateCartDisplay();
                alert(`"${productName}" adicionado ao carrinho!`);
            });
        });

        // Abre o modal do carrinho
        openCartBtn.addEventListener('click', () => {
            cartModal.style.display = 'flex'; // Use flex para centralizar
            renderCartItems();
        });

        // Fecha o modal do carrinho
        closeCartBtn.addEventListener('click', () => {
            cartModal.style.display = 'none';
        });

        // Fecha o modal se clicar fora dele
        window.addEventListener('click', (event) => {
            if (event.target === cartModal) {
                cartModal.style.display = 'none';
            }
        });

        // Renderiza os itens no modal do carrinho
        function renderCartItems() {
            cartItemsContainer.innerHTML = ''; // Limpa os itens existentes
            let total = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="empty-cart-message">Seu carrinho est√° vazio.</p>';
            } else {
                cart.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.classList.add('cart-item');
                    itemElement.innerHTML = `
                        <span>${item.name} (R$ ${item.price.toFixed(2)})</span>
                        <div class="item-controls">
                            <button class="quantity-btn" data-index="${index}" data-action="decrease">-</button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="quantity-btn" data-index="${index}" data-action="increase">+</button>
                            <button class="remove-item-btn" data-index="${index}"><i class="fas fa-trash"></i></button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemElement);
                    total += item.price * item.quantity;
                });
            }

            cartTotalSpan.textContent = `R$ ${total.toFixed(2)}`;
            updateWhatsAppButton(); // Atualiza o bot√£o flutuante e de checkout
        }

        // Atualiza a exibi√ß√£o do carrinho (contador de itens e total)
        function updateCartDisplay() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartItemCount.textContent = totalItems;
            renderCartItems(); // Renderiza tamb√©m o modal
        }

        // L√≥gica para aumentar/diminuir quantidade ou remover item
        cartItemsContainer.addEventListener('click', (event) => {
            if (event.target.classList.contains('quantity-btn')) {
                const index = event.target.dataset.index;
                const action = event.target.dataset.action;

                if (action === 'increase') {
                    cart[index].quantity++;
                } else if (action === 'decrease') {
                    cart[index].quantity--;
                    if (cart[index].quantity <= 0) {
                        cart.splice(index, 1); // Remove se a quantidade for 0 ou menos
                    }
                }
                updateCartDisplay();
            } else if (event.target.classList.contains('remove-item-btn') || event.target.closest('.remove-item-btn')) {
                const index = event.target.dataset.index || event.target.closest('.remove-item-btn').dataset.index;
                cart.splice(index, 1);
                updateCartDisplay();
            }
        });

        // Bot√£o "Limpar Carrinho"
        clearCartBtn.addEventListener('click', () => {
            cart = [];
            updateCartDisplay();
            alert('Carrinho limpo!');
        });

        // Enviar pedido via WhatsApp do carrinho
        checkoutWhatsappBtn.addEventListener('click', () => {
            sendOrderViaWhatsApp();
        });

        // Enviar pedido via WhatsApp do bot√£o flutuante
        whatsappFloatBtn.addEventListener('click', (event) => {
            // Impede que o link padr√£o seja seguido se o carrinho estiver vazio
            if (cart.length === 0) {
                event.preventDefault();
                alert('Seu carrinho est√° vazio. Adicione produtos antes de enviar o pedido!');
            } else {
                sendOrderViaWhatsApp();
            }
        });


        // Fun√ß√£o para gerar a mensagem do WhatsApp
        function sendOrderViaWhatsApp() {
            if (cart.length === 0) {
                // Isso j√° deve ser bloqueado pelo bot√£o desabilitado, mas √© uma seguran√ßa
                alert('Seu carrinho est√° vazio. Adicione produtos antes de enviar o pedido!');
                return;
            }

            let message = "Ol√°, Sra. Lourdes! Gostaria de fazer um pedido do Armaz√©m do S√≠tio:\n\n";
            let total = 0;

            cart.forEach(item => {
                message += `${item.quantity}x ${item.name} - R$ ${(item.price * item.quantity).toFixed(2)}\n`;
                total += item.price * item.quantity;
            });

            message += `\nTotal: R$ ${total.toFixed(2)}`;
            message += `\n\nPor favor, me informe sobre a disponibilidade, formas de pagamento e op√ß√µes de entrega/retirada.`;

            // Substitua pelo n√∫mero real da Sra. Lourdes (55 + DDD + N√∫mero)
            const whatsappNumber = "5544999999999";
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;

            window.open(whatsappUrl, '_blank');
            // Opcional: Limpar o carrinho ap√≥s enviar o pedido
            // cart = [];
            // updateCartDisplay();
            // cartModal.style.display = 'none';
        }

        // Atualiza o link do WhatsApp para o bot√£o flutuante
        function updateWhatsAppButton() {
            if (cart.length > 0) {
                whatsappFloatBtn.classList.add('has-items');
                checkoutWhatsappBtn.disabled = false;
                whatsappFloatBtn.style.cursor = 'pointer'; // Torna o cursor de "clic√°vel"
            } else {
                whatsappFloatBtn.classList.remove('has-items');
                checkoutWhatsappBtn.disabled = true;
                whatsappFloatBtn.style.cursor = 'not-allowed'; // Torna o cursor de "n√£o permitido"
            }
            // A mensagem do WhatsApp √© gerada dinamicamente quando o bot√£o √© clicado (na fun√ß√£o sendOrderViaWhatsApp)
        }

        // Fun√ß√£o para filtrar produtos por categoria
        document.querySelectorAll('.filter-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                const category = button.dataset.category;
                document.querySelectorAll('.product-card').forEach(card => {
                    if (category === 'all' || card.dataset.category === category) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });

        // Inicializa a exibi√ß√£o do carrinho ao carregar a p√°gina
        updateCartDisplay();

        // Carrega produtos do localStorage
        const savedProducts = JSON.parse(localStorage.getItem('produtos') || '[]');
        const productGrid = document.querySelector('#produtos .product-grid');

        savedProducts.forEach(product => {
            const card = document.createElement('div');
            card.classList.add('product-card');
            card.setAttribute('data-category', product.category);
            card.innerHTML = `
      <img src="${product.image}" alt="${product.name}">
      <h3>${product.name}</h3>
      <p>${product.description}</p>
      <span class="price" data-value="${product.price}">R$ ${parseFloat(product.price).toFixed(2)}</span>
      <button class="add-to-cart-btn" data-name="${product.name}" data-price="${product.price}">Adicionar ao Carrinho</button>
    `;
            productGrid.appendChild(card);
        });
    </script>
</body>

</html>